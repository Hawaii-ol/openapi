# 虚拟数据中心公开API目录
-----------------------------
* [认证方式](https://github.com/capitalonline/openapi/blob/master/%E9%A6%96%E4%BA%91OpenAPI(v1.2).md#认证方式)
  * [1.公共请求参数](https://github.com/capitalonline/openapi/blob/master/%E9%A6%96%E4%BA%91OpenAPI(v1.2).md#1公共请求参数)
  * [2.签名机制](https://github.com/capitalonline/openapi/blob/master/%E9%A6%96%E4%BA%91OpenAPI(v1.2).md#2签名机制)
    * [步骤一：构造规范化请求字符串](https://github.com/capitalonline/openapi/blob/master/%E9%A6%96%E4%BA%91OpenAPI(v1.2).md#步骤一构造规范化请求字符串)
    * [步骤二：构造签名字符串](https://github.com/capitalonline/openapi/blob/master/%E9%A6%96%E4%BA%91OpenAPI(v1.2).md#步骤二构造签名字符串)
  * [3.获取签名代码](https://github.com/capitalonline/openapi/blob/master/%E9%A6%96%E4%BA%91OpenAPI(v1.2).md#2获取签名代码)

* [虚拟数据中心相关](#虚拟数据中心相关)
    * [1.DescribeVdc](#1describevdc)
    * [2.CreateVdc](#2createvdc)
    * [3.DeleteVdc](#3deletevdc)
    * [4.CreatePublicNetwork](#4createpublicnetwork)
    * [5.CreatePrivateNetwork](#5createprivatenetwork)
    * [6.ModifyPublicNetwork](#6modifypublicnetwork)
    * [7.AddPublicIp](#7addpublicip)
    * [8.DeletePublicIp](#8deletepublicip)
    * [9.DeletePublicNetwork](#9deletepublicnetwork)
    * [10.DeletePrivateNetwork](#10deleteprivatenetwork)
    * [11.RenewPublicNetwork](#11renewpublicnetwork)
    * [12.DescribeBandwidthTraffic](#12describebandwidthtraffic)
    * [13.DescribeGPN](#13describegpn)
    * [14.AddAccessPoint](#14addaccesspoint)
    * [15.DeleteAccessPoint](#15deleteaccesspoint)
    * [16.DescribeAccessInfo](#16describeaccessinfo)
    * [17.CreateGPN](#17creategpn)
    * [18.DeleteGPN](#18deletegpn)
    * [19.ModifyVdcName](#19modifyvdcname)
    * [20.DescribePipeUtilization](#20describepipeutilization)
## 虚拟数据中心相关

### 1.DescribeVdc

  **Action：** DescribeVdc

  **描述：** 查询虚拟数据中心(以下简称VDC)详细信息

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数:**

| 名称       | 类型    | 是否必选 | 示例                                 | 描述                       |
| ---------- | ------- | -------- | ------------------------------------ | -------------------------- |
| RegionId   | string  | 否       | CN_Beijing_A                         | 选择Vdc所属可用区,见附件一 |
| VdcId      | string  | 否       | f9053ea8-fc23-4032-8a7f-01def77b4cc0 | Vdc编号                    |
| PageNumber | Integer | 否       | 1                                    | Vdc列表的页码              |
| Keyword    | string  | 否       | Beijing                              | 查询关键字                 |
| ProjectId  | string  | 否       | 0-0 | 项目组ID                |

  **返回参数:**

| 名称           | 类型     | 示例                                                         | 描述                                                         |
| -------------- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Code           | interger | Success                                                      | 错误码                                                       |
| PageNumber     | interger | 1                                                            | 页码                                                         |
| PageCount      | interger | 10                                                           | 总页数                                                       |
| Data           | List     | []                                                           | 返回数据列表                                                 |
| VdcId          | string   | f9053ea8-fc23-4032-8a7f-01def77b4cc0                         | Vdc编号                                                      |
| VdcName        | string   | capitalcloud                                                 | Vdc名称                                                      |
| RegionId       | string   | CN_Beijing_A                                                 | Vdc所在可用区                                                |
| VdcStatus      | string   | ok                                                           | Vdc的使用状态                                                |
| PublicNetwork  | string   | {"Name": "公网1",<br/>"Status":"ok";<br />    "Type": "BGP_4",<br/>    "Qos": "20",<br/>''Ip':"38.121.60.96"<br />"Mask":"28"} | Name:公网名称<br />Status：状态<br />Type：公网带宽类型<br />Qos：带宽大小<br />Ip：购买的Ip段<br />Mask:掩码 |
| PrivateNetwork | string   | [{<br />"Name":"私网1",<br />"Status":"ok",<br />"Ip":"10.241.16.0/16"<br />"Id":"22b729aa-4540-11e9-99c5-0242ac11001b"},<br />{<br />"Name":"私网2",<br />"Status":"ok",<br />"Ip":"10.241.40.0"<br />"Mask":"16"<br />"Id":"c0d2bbf7-0e09-49d5-8dc7-8fe90e722c47"}] | Name：私网名称<br />Status：状态<br />Ip：购买的私网Ip段<br />Mask:掩码<br />ID:网络id |

**错误码:**

| httpcode | 错误码                    | 错误信息                                           | 描述                   |
| -------- | ------------------------- | -------------------------------------------------- | ---------------------- |
| 400      | InvalidRegionID.Malformed | The specified parameter   "RegionId" is not valid. | 指定可用区参数格式错误 |
| 400      | VDCNotFound               | the VDC has deleted.                               | 指定的VDC已被删除      |
| 400      | InvalidVDCID.Malformed    | The specified parameter "VdcId" is not valid.      | 指定VdcId参数格式错误  |

**返回示例:**

```json
{
    "Message":"Success.",
    "Code":"Success",
    "Data":[
        {
            "PublicNetwork":[
                {
                    "Status":"ok",
                    "Qos":20,
                    "Name":"cdsApi-public-2",
                    "Segments":[
                        {
                            "Mask":30,
                            "Gateway":"144.143.14.149",
                            "SegmentId":"e0e5ea32-a7b6-11e9-9052-0242ac11001b",
                            "Address":"144.143.14.148"
                        }
                    ],
                    "UnuseIpNum":1,
                    "PublicId":"e1186a02-a7b6-11e9-9052-0242ac11001b"
                }
            ],
            "PageCount":0,
            "RegionId":"CN_Beijing_A",
            "VdcId":"0bb08ed7-e686-4168-93e5-e0187579753b",
            "PageNumber":0,
            "VdcName":"cdsApi-testaa",
            "PrivateNetwork":[
                {
                    "Status":"ok",
                    "UnuseIpNum":253,
                    "Segments":[
                        "10.240.59.0/16~10.240.59.255/16"
                    ],
                    "PrivateId":"4e6f6790-a6b3-11e9-8f88-0242ac110041",
                    "Name":"siwang-api1"
                }
            ]
        }
    ]
}
```

**调用代码示例:**

```python
def descrive_vdc(keyword=None, vdc_id=None, region_id=None, project_id=None):
    """
    vdc详情
    @params: keyword: 查询关键字
    @params: vdc_id: 虚拟数据中心uuid
    @params: region_id: 区域代码
    """
    action = "DescribeVdc"
    method = "GET"
    param = {}
    if keyword:
        param.update({"Keyword": keyword})
    if vdc_id:
        param.update({"VdcId": vdc_id})
    if region_id:
        param.update({"RegionId": region_id})
    if project_id:
        param.update({"ProjectId": project_id})        
    url = get_signature(action, AK, AccessKeySecret, method, NETWORK_URL, param=param)
    res = requests.get(url)
    result = json.loads(res.content)
    if result.get("Code") != "Success":
        print("get vdc info error.")
        return None
    data = result.get("Data")
    return data
```



### 2.CreateVdc

  **Action:CreateVdc**

  **描述：** 创建一个Vdc

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：POST**

  **请求参数：**

| 名称          | 类型   | 是否必选 | 示例值                                                       | 描述                                   |
| ------------- | ------ | -------- | ------------------------------------------------------------ | -------------------------------------- |
| RegionId      | string | 是       | cn_beijingA                                                  | Vdc所属的可用区Id                      |
| VdcName       | string | 否       | newVdc                                                       | 创建的Vdc名称，不填写时默认写入Vdc的Id |
| PublicNetwork | string | 否       | PublicNetword: {"Name": "公网1","Type": "Bandwidth_BGP", "BillingMethod": "BandwIdth", "Qos": 20, "IPNum":4, "AutoRenew":0, "FloatBandwich":200,"BusyQos":10, "BusyFloatBandwidth": 100} | 参考附件三带宽类型,  BusyQos、BusyFloatBandwidth繁时保底和封顶，普通带宽可不传                   |
| SubjectId      | int | 否       | 123                                                  | 测试金Id                    |


  **返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code   | Interger | Success                              | 错误码 |
| TaskId | string   | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码:**

| httpcode | 错误码                                        | 错误信息                                                     | 描述                           |
| -------- | --------------------------------------------- | ------------------------------------------------------------ | ------------------------------ |
| 400      | Account.Arrearage                             | Your account has been in   arrears.                          | 账户余额不足，请先充值再操作。 |
| 403      | Region.NotOnSale                              | The resource in the specified   Region is no longer available for sale. Please try other regions and zones. | 指定的可用区暂停售卖。         |
| 400      | QuotaExceed.Vdc                               | The   maximum number of Vdc is exceeded                      | 创建的Vdc数量超出限制          |
| 400      | InvalidRegionId.Malformed                     | The specified parameter   "RegionId" is not valid.           | 指定可用区参数格式错误         |
| 400      | InvalidPublicNetwork. Type.Malformed          | The specified parameter   "PbulicNetwork.Type" is not valid. | 指定的公网类型格式错误。       |
| 400      | InvalidPublicNetwork. BillingMethod.Malformed | The specified parameter   "PbulicNetwork.BillingMethod" is not valid. | 指定的公网计费类型格式错误。   |
| 400      | InvalidPublicNetwork. Bandwich.Malformed      | The specified parameter   "PbulicNetwork.Bandwich" is not valid. | 指定的公网带宽大小格式错误。   |
| 400      | InvalidPublicNetwork. Bandwich.Malformed      | The specified parameter   "PbulicNetwork.Bandwich" is not valid. | 指定的公网带宽大小格式错误。   |
| 400      | InvalidPublicNetwork.Ip.Malformed             | The specified parameter   "PbulicNetwork.Ip" is not valid.   | 指定的公网Ip格式错误。         |

  **返回示例：**

```
{
   "Code":"Success",
   "TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376"
}
```

  **代码请求示例:**

```python
def create_vdc(site_code, wan_code, qos, vdc_name):
    """
    @params: site_code: 区域代码
    @params: wan_code: 公网类型代码
    @params: qos: 公网带宽
    @params: vdc_name: 虚拟数据中心名称
    """
    action = "CreateVdc"
    method = "POST"
    param = {}
    url = get_signature(action, AK, AccessKeySecret, method, NETWORK_URL, param=param)
    body = {
        "RegionId": site_code,
        "VdcName": vdc_name,
        "PublicNetwork": {
            "Name": vdc_name,
            "Type": wan_code,
            "BillingMethod": "Bandwidth",
            "Qos": qos,
            "IPNum": 4
        }
    }
    res = requests.post(url, json=body)
    result = json.loads(res.content)
    if result.get("Code") != "Success":
        print("create vdc error.")
        return None
    task_id = result.get("TaskId")
    return task_id
```



### 3.DeleteVdc

  **Action：DeleteVdc**

  **描述：** 删除一个没有公网及没有加入gpn等其他产品的Vdc

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称  | 类型   | 是否必选 | 示例值                               | 描述                               |
| ----- | ------ | -------- | ------------------------------------ | ---------------------------------- |
| VdcId | string | 是       | f9053ea8-fc23-4032-8a7f-01def77b4cc0 | Vdc的编号，可以在查询Vdc详情中查出 |

  **返回参数：**

| 名称   | 类型   | 示例值                               | 描述   |
| :----- | ------ | :----------------------------------- | :----- |
| Code   | string | Success                              | 错误码 |
| TaskId | string | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码：**

| httpcode | 错误码                 | 错误信息                                                     | 描述                           |
| -------- | ---------------------- | ------------------------------------------------------------ | ------------------------------ |
| 403      | IncorrectVdcStatus     | The   current Status of the resource does not support this operation. | 该资源目前的状态不支持此操作。 |
| 400      | VdcNotFound            | the Vdc has   deleted                                        | 指定的Vdc已被删除              |
| 400      | InvalidVdcId.Malformed | The specified parameter   "VdcId" is not valid.              | 指定VdcId参数格式错误          |

  **返回示例：**

```
{
"Code":"Success"
"TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376"
"RequestId":"bbf63749-0186-4c68-8adc-9bf584b1234"
}
```

### 4.CreatePublicNetwork

  **Action:CreatePublicNetwork**

  **描述：** 给一个Vdc增加公网带宽和Ip

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：POST**

  **请求参数:**

| 名称           | 类型   | 是否必选 | 示例值                               | 描述                                                         |
| -------------- | ------ | -------- | ------------------------------------ | ------------------------------------------------------------ |
| VdcId          | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 云服务器所属的Vdc                                            |
| Name           | string | 否       | 公网1                                | 公网名称，不填写时默认写公网1                                |
| Type           | string | 是       | BGP_4                                | BGP_4(4线BGP)       BGP_2(双线BGP)       ChinaTelecom(电信)       AntiDDOS(防DDOS) |
| BillingMethod  | string | 是       | Bandwidth                            | Bandwidth（固定带宽，默认）<br />Traffic（流量按需）       <br />DataPackage（流量包）      <br />Bandwidth_95（95峰值） |
| Qos            | int    | 是       |                                      | 类型是固定带宽时，此处是公网带宽大小，最大500，步长5；类型是95峰值时，此处代表保底带宽，最大为500，步长50；类型是流量包时，代表流量包大小，单位是GB，最大是51200（50T) |
| IPNum          | int    | 是       |                                      | 购买的Ip数量，可选参数:{4,8,16,32,64}                        |
| AutoRenew      | int    | 是       |                                      | 带宽类型为流量包和95峰值时，是否自动续费，1为自动续费（默认），0为不自动续费 |
| FloatBandwidth | int    | 是       |                                      | 公网类型为95峰值时，带宽大小的封顶带宽，为空时，默认为带宽大小的120% |
| SubjectId      | int | 否       | 123                                                  | 测试金Id                  |
| BusyQos            | int    | 否       |                                      | 繁时保底带宽，正常全时带宽可不传 |
| BusyFloatBandwidth | int    | 否       |                                      | 繁时封顶带宽，正常全时带宽可不传 |

  **返回参数：**

| 名称   | 类型   | 示例值                               | 描述   |
| :----- | ------ | :----------------------------------- | :----- |
| Code   | string | Success                              | 错误码 |
| TaskId | string | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码:**

| httpcode | 错误码                                        | 错误信息                                                     | 描述                           |
| -------- | --------------------------------------------- | ------------------------------------------------------------ | ------------------------------ |
| 400      | Account.Arrearage                             | Your account has been in   arrears.                          | 账户余额不足，请先充值再操作。 |
| 400      | InvalidVdcId.Malformed                        | The specified parameter   "VdcId" is not valid.              | 指定VdcId参数格式错误          |
| 400      | InvalidPublicNetwork. Type.Malformed          | The specified parameter   "PbulicNetwork.Type" is not valid. | 指定的公网类型格式错误。       |
| 400      | InvalidPublicNetwork. BillingMethod.Malformed | The specified parameter   "PbulicNetwork.BillingMethod" is not valid. | 指定的公网计费类型格式错误。   |
| 400      | InvalidPublicNetwork. Bandwich.Malformed      | The specified parameter   "PbulicNetwork.Bandwich" is not valid. | 指定的公网带宽大小格式错误。   |
| 400      | InvalidPublicNetwork. Bandwich.Malformed      | The specified parameter   "PbulicNetwork.Bandwich" is not valid. | 指定的公网带宽大小格式错误。   |
| 400      | InvalidPublicNetwork.Ip.Malformed             | The specified parameter   "PbulicNetwork.Ip" is not valid.   | 指定的公网Ip格式错误。         |

  **返回示例：**

```
{
   "Code":"Success,
   "TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376"
}
```

### 5.CreatePrivateNetwork

  **Action:CreatePrivateNetwork**

  **描述：** 给一个Vdc创建一个私网

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：POST**

  **请求参数：**

| 名称    | 类型   | 是否必选 | 示例值                               | 描述                            |
| ------- | ------ | -------- | ------------------------------------ | ------------------------------- |
| VdcId   | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 云服务器所属的Vdc               |
| Name    | string | 否       | siwang1                              | 私网名称，默认不写名称是私网1/2 |
| Type    | string | 否       | manual                               | 私网类型(auto/manual)，默认auto |
| Address | string | 否       | 192.168.0.0                          | 私网地址                        |
| Mask    | string | 否       | 16                                   | 私网掩码                        |

  **返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code   | Interger | Success                              | 错误码 |
| TaskId | string   | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码：**

| httpcode | 错误码                     | 错误信息                                           | 描述                   |
| -------- | -------------------------- | -------------------------------------------------- | ---------------------- |
| 400      | InvalidVDCID.Malformed     | The specified parameter   "VDCID" is not valid.    | 指定VDCID参数格式错误  |
| 400      | QuotaExceed.PrivateNetwork | The   maximum number of PrivateNetwork is exceeded | 创建的私网数量超出限制 |

  **返回示例：**

```
{
"Code":"Success",
"TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376"
}
```

  **代码调用示例:**

```python
def create_private(vdc_id):
    action = "CreatePrivateNetwork"
    method = "POST"
    url = get_signature(action, AK, AccessKeySecret, method, NETWORK_URL)
    body = {
        "VdcId": vdc_id,
       "Name": "私网"
    }
    res = requests.post(url, json=body)
    result = json.loads(res.content)
```

### 6.ModifyPublicNetwork

  **Action:ModifyPublicNetwork**

  **描述：** 变更Vdc的公网带宽大小或者类型

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称     | 类型   | 是否必选 | 示例值                               | 描述     |
| -------- | ------ | -------- | ------------------------------------ | -------- |
| PublicId | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 公网id   |
| Qos      | string | 是       | 100                                  | 带宽大小 |

  **返回参数：**

| 名称   | 类型   | 示例值                               | 描述   |
| :----- | ------ | :----------------------------------- | :----- |
| Code   | string | Success                              | 错误码 |
| TaskId | string | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码：**

| httpcode | 错误码                           | 错误信息                                                  | 描述                   |
| -------- | -------------------------------- | --------------------------------------------------------- | ---------------------- |
| 400      | InvalidPublicNetworkID.Malformed | The specified parameter   "PublicNetworkID" is not valid. | 指定公网ID参数格式错误 |

  **返回示例：**

```
{
"Code":"Success",
"TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376"
}
```

  **代码调用示例:**

```python
def modify_public_qos(publicId, qos):
    """
    修改公网带宽
    @params: publicId: 公网uuid
    @params: qos: 带宽大小
    """
    action = "ModifyPublicNetwork"
    method = "GET"
    param = {
        "PublicId": publicId,
        "Qos": qos
    }
    url = get_signature(action, AK, AccessKeySecret, method, NETWORK_URL, param)
    res = requests.get(url)
    result = json.loads(res.content)
    if result.get("Code") != "Success":
        print(result.get("Message"))
    task_id = result.get("TaskId")
    return task_id
```

### 7.AddPublicIp

  **Action:AddPublicIp**

  **描述：** 为已经购买的公网增加一个公网Ip段

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称     | 类型     | 是否必选 | 示例值                               | 描述                                  |
| -------- | -------- | -------- | ------------------------------------ | ------------------------------------- |
| PublicId | string   | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 公网id                                |
| Number   | Interger | 是       | 8                                    | 购买的Ip数量，可选参数:{4,8,16,32,64} |

  **返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code   | Interger | Success                              | 错误码 |
| TaskId | string   | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码：**

| httpcode | 错误码                            | 错误信息                                                   | 描述                   |
| -------- | --------------------------------- | ---------------------------------------------------------- | ---------------------- |
| 400      | InvalidPublicNetwork.IP.Malformed | The specified parameter   "PbulicNetwork.IP" is not valid. | 指定的公网IP格式错误。 |

  **返回示例：**

```
{
"Code":"Success",
"TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376"
}  
```

  **代码调用示例:**

```python

```

### 8.DeletePublicIp

  **Action:DeletePublicIp**

  **描述：** 删除Vdc公网下的一个Ip段

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称      | 类型   | 是否必选 | 示例值                               | 描述         |
| --------- | ------ | -------- | ------------------------------------ | ------------ |
| SegmentId | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 公网Ip段的Id |

  **返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code   | Interger | Success                              | 错误码 |
| TaskId | string   | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码：**

| httpcode | 错误码                | 错误信息                                       | 描述                 |
| -------- | --------------------- | ---------------------------------------------- | -------------------- |
| 400      | InvalidIpId.Malformed | The specified parameter   "IpId" is not valid. | 指定IpId参数格式错误 |

  **返回示例：**

```json
{
"Code":"Success",
"TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376",
}
```

  **代码调用示例:**

```python

```

### 9.DeletePublicNetwork

  **Action:DeletePublicNetwork**

  **描述：** 删除Vdc下已经创建的公网Ip及带宽

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称     | 类型   | 是否必选 | 示例值                               | 描述   |
| -------- | ------ | -------- | ------------------------------------ | ------ |
| PublicId | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 公网Id |

  **返回参数：**

| 名称 | 类型     | 示例值  | 描述   |
| :--- | -------- | :------ | :----- |
| Code | Interger | Success | 错误码 |

  **错误码：**

| httpcode | 错误码                    | 错误信息                                           | 描述                   |
| -------- | ------------------------- | -------------------------------------------------- | ---------------------- |
| 400      | InvalidPublicID.Malformed | The specified parameter   "PublicID" is not valid. | 指定公网ID参数格式错误 |

  **返回示例：**

```json
{
"Code":"Success"
}
```

### 10.DeletePrivateNetwork

  **Action:DeletePrivateNetwork**

  **描述：** 删除Vdc下已经创建的私网

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称      | 类型   | 是否必选 | 示例值                               | 描述   |
| --------- | ------ | -------- | ------------------------------------ | ------ |
| PrivateId | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 私网Id |

  **返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code   | Interger | Success                              | 错误码 |
| TaskId | string   | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

  **错误码：**

| httpcode | 错误码                     | 错误信息                                            | 描述                   |
| -------- | -------------------------- | --------------------------------------------------- | ---------------------- |
| 400      | InvalidPrivateId.Malformed | The specified parameter   "PrivateID" is not valid. | 指定私网Id参数格式错误 |

  **返回示例：**

```json
{
"Code":"Success",
"TaskId":"bbf63749-0186-4c68-8adc-9bf584bc1376",
}
```

### 11.RenewPublicNetwork

  **Action:RenewPublicNetwork**

  **描述：** 修改公网的自动续约为开或者关

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称      | 类型     | 是否必选 | 示例值                               | 描述                                             |
| --------- | -------- | -------- | ------------------------------------ | ------------------------------------------------ |
| PublicId  | string   | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 公网Id                                           |
| AutoRenew | Interger | 是       | 1                                    | 是否自动续费，1为自动续费（默认），0为不自动续费 |

  **返回参数：**

| 名称 | 类型     | 示例值  | 描述   |
| :--- | -------- | :------ | :----- |
| Code | Interger | Success | 错误码 |

  **错误码：**

| httpcode | 错误码                    | 错误信息                                            | 描述                   |
| -------- | ------------------------- | --------------------------------------------------- | ---------------------- |
| 400      | InvalidPublicId.Malformed | The specified parameter   "PrivateID" is not valid. | 指定公网Id参数格式错误 |

  **返回示例：**

```json
{
"Code":"Success",
"Message":"Success."
}
```

### 12.DescribeBandwidthTraffic

  **Action:DescribeBandwidthTraffic**

  **描述：** 获取网络最近五分钟流量

  **请求地址:** cdsapi.capitalonline.net/network

  **请求方法：GET**

  **请求参数：**

| 名称      | 类型   | 是否必选 | 示例值                               | 描述                                                     |
| --------- | ------ | -------- | ------------------------------------ | -------------------------------------------------------- |
| NetworkId | string | 是       | 773f14c2-c8bc-4f66-acd7-ec34d3bfde7d | 网络Id(若查询公网即为PublicId， 若查询私网即为PrivateId) |

  **返回参数：**

| 名称 | 类型     | 示例值  | 描述     |
| :--- | -------- | :------ | :------- |
| Code | Interger | Success | 错误码   |
| Data | string   | {}      | 返回数据 |

  **错误码：**

| httpcode | 错误码                    | 错误信息                                           | 描述                   |
| -------- | ------------------------- | -------------------------------------------------- | ---------------------- |
| 400      | InvalidPublicId.Malformed | The specified parameter   "PublicId" is not valid. | 指定公网Id参数格式错误 |

  **返回示例：**

```json
{
    "Code": "Success",
    "Data": {
        "LastFiveMinutesUsage": {
            "Inbps": 0,
            "Outbps": 107.467
        },
        "MaxQos": 5
    },
    "Message": "Success."
}
```

### 13.DescribeGPN

**Action:** DescribeGPN

**描述:** 查询云互联组(以下简称GPN)

**请求地址:** cdsapi.capitalonline.net/network

**请求方法:** POST

**请求参数:**

| 名称  |  类型  | 是否必选 |                 示例                 |  描述   |
| :---: | :----: | :------: | :----------------------------------: | :-----: |
| GpnId | String |    否    | 55271ebc-135d-11eb-97aa-0242ac110002 | GPN编号 |
|  Key  | String |    否    |               中美互联               | 关键词  |
| ProjectId  | string  | 否       | 0-0 | 项目组ID     |

**返回参数:**

| 名称       | 类型   | 示例                                                         | 描述                                                         |
| :--------- | :----- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| Code       | String | Success                                                      | 返回码                                                       |
| Data       | List   | []                                                           | 返回数据                                                     |
| GpnId      | String | c20a8424-26be-11ea-8333-0242ac110002                         | 云互联组编号                                                 |
| Qos        | Int    | 300                                                          | GPN带宽                                                      |
| Name       | Strint | 北京-无锡                                                    | GPN名称                                                      |
| EvpnId     | Int    | 12345                                                        | Evpn编号                                                     |
| Status     | String | ok                                                           | GPN状态                                                      |
| StatusStr  | String | 正常                                                         | GPN状态                                                      |
| SubOrderId | String | 425d533e-2d3d-11ea-93ed-0242ac110002                         | 订单编号                                                     |
| JoinVdcs   | List   | [{<br>"PrivateId":"2f8695bc-223f-11ea-bf4e-0050569e6138",<br>"RegionId":"CN_Beijing_A", <br>"VdcName": "北京一", <br>"VdcId": "425d533e-2d3d-11ea-93ed-0242ac110002",<br>"CityId": "713d3745-306d-11e7-9796-0050569b4d9c", <br>"PrivateNet": "10.240.129.0/16~10.240.129.255/16", <br>"Address": "10.240.129.0", <br>"Qos": 300<br>}] | PrivateId: 私网编号 <br>RegionId: 可用区编号 <br>VdcName: 数据中心名称 <br>VdcId: 数据中心编号 <br>CityId:城市编号 <br>PrivateNet:私网网段 <br>Address:私网地址 <br>Qos:私网带宽 |
| JoinVpcs   | List   | [{<br>"PrivateId":"2f8695bc-223f-11ea-bf4e-0050569e6138",<br>"RegionId":"CN_Beijing_A", <br>"VpcName": "北京一", <br>"VpcId": "425d533e-2d3d-11ea-93ed-0242ac110002",<br>"CityId": "713d3745-306d-11e7-9796-0050569b4d9c", <br>"PrivateNet": "10.240.129.0/16~10.240.129.255/16", <br>"Address": "10.240.129.0", <br>"Qos": 300<br>}] | PrivateId: 私网编号 <br>RegionId: 可用区编号 <br>VdcName: 数据中心名称 <br>VdcId: 数据中心编号 <br>CityId:城市编号 <br>PrivateNet:私网网段 <br>Address:私网地址 <br>Qos:私网带宽 |
| JoinPops   | List   | [{<br>"PopId":"2f8695bc-223f-11ea-bf4e-0050569e6138",<br>"CityId": "713d3745-306d-11e7-9796-0050569b4d9c", <br>"PopName": "北京一Pop", <br>"Qos": 300<br>}] | PopId: POP编号 <br>CityId:城市编号 <br>PopName: Pop名称 <br>Qos:Pop带宽 |


**错误码:**

| httpcode |         错误码         |                   错误信息                    |         描述          |
| :------: | :--------------------: | :-------------------------------------------: | :-------------------: |

**返回示例**

```json
{
    "Code": "Success",
    "Data": [
        {
            "EvpnId": 14105,
            "GpnId": "d91cc8a6-306a-11ea-ae2f-0242ac110002",
            "JoinVdcs": [
                {
                    "Address": "10.240.129.0",
                    "CityId": "713d3745-306d-11e7-9796-0050569b4d9c",
                    "PrivateId": "581d0c26-deb1-11e9-a055-0242ac110002",
                    "PrivateNet": "10.240.129.0/16~10.240.129.255/16",
                    "Qos": 5,
                    "RegionId": "CN_Taipei_A",
                    "VdcId": "206305c4-6b1e-4eef-a582-352216b3b48c",
                    "VdcName": "CDS-API台湾"
                },
                {
                    "Address": "192.168.1.0",
                    "CityId": "ea3ca775-306c-11e7-9796-0050569b4d9c",
                    "PrivateId": "cb166f84-1d76-11ea-9c39-0242ac110002",
                    "PrivateNet": "192.168.1.0/24",
                    "Qos": 5,
                    "RegionId": "CN_Beijing_A",
                    "VdcId": "179d1487-38dd-4656-9553-e1527bf183b2",
                    "VdcName": "CDS-API北京"
                },
                {
                    "Address": "10.240.169.0",
                    "CityId": "123d0d01-306d-11e7-9796-0050569b4d9c",
                    "PrivateId": "c20a8424-26be-11ea-8333-0242ac110002",
                    "PrivateNet": "10.240.169.0/16~10.240.169.255/16",
                    "Qos": 5,
                    "RegionId": "CN_Wuxi_A",
                    "VdcId": "72e2157d-4568-4c24-8585-8865f1683a10",
                    "VdcName": "CDS-API无锡"
                }
            ],
            "JoinVpcs": [
                {
                    "Address": "10.241.165.0",
                    "CityId": "e48e2312-306d-11e7-9796-0050569b4d9c",
                    "PrivateId": "ea683378-09f6-11eb-8e89-0242ac1112b3",
                    "PrivateNet": "10.241.165.0/16~10.241.165.255/16",
                    "Qos": 5,
                    "RegionId": "US_Dallas_D",
                    "VpcId": "de96aeb2-0159-11eb-abc1-12d7b66798c8",
                    "VpcName": "CDS-API达拉斯"
                }
            ],
            "JoinPops": null,
            "Name": "CDS-API-GPN",
            "Qos": 5,
            "Status": "ok",
            "StatusStr": "正常",
            "SubOrderId": "280dfb38-306b-11ea-85b1-1e50f85e211b"
        }
    ],
    "Message": "Success."
}
```

### 14.AddAccessPoint

**Action:** AddAccessPoint

**描述:** 云互联组增加接入点

**请求地址:** cdsapi.capitalonline.net/network

**请求方法:** POST

**请求参数:**

|  名称  |  类型  | 是否必选 | 示例                                                         | 描述                                               |
| :----: | :----: | :------: | :----------------------------------------------------------- | :------------------------------------------------- |
| GpnId  | String |    是    | c20a8424-26be-11ea-8333-0242ac110002                         | Gpn编号                                            |
| VdcAdd |  list  |    否    | [{<br>"VdcId": "c20a8769-26be-11ea-8333-0242ac110002", <br>"PointType":"VDC", <br>"PrivateId": "425d533e-2d3d-11ea-93ed-0242ac110002", <br>"CityId": "4257d33e-2d3d-11ea-93ed-0242ac110002"<br>}] | 添加VDC接入点                                      |
| PopAdd |  list  |    否    | [{<br>"PopId": "c20a8769-26be-11ea-8333-0242ac110002", <br>"CityId":"4257d33e-2d3d-11ea-93ed-0242ac110002", <br>"PointType": "Pop"<br>}] | 添加POP接入点<br>备注:PopAdd 和 VdcAdd不可同时为[] |


**返回参数:**

| 名称 | 类型   | 示例    | 描述     |
| :--- | :----- | :------ | :------- |
| Code | String | Success | 返回码   |
| Data | Dict   | {}      | 返回数据 |


**错误码：**

| httpcode | 错误码                 | 错误信息                                      | 描述                  |
| -------- | ---------------------- | --------------------------------------------- | --------------------- |
| 400      | InvalidGpnID.Malformed | The specified parameter "GpnId" is not valid. | 指定GpnId参数格式错误 |
| 400      | InvalidVdcID.Malformed | The specified parameter "VdcId" is not valid. | 指定VdcId参数格式错误 |


**返回示例**

```json
{
    "Code": "Success",
    "Data": {},
    "Message": "Success.",
    "TaskId": 3247486
}
```

### 15.DeleteAccessPoint

**Action:** DeleteAccessPoint

**描述:** 云互联组删除接入点

**请求地址:** cdsapi.capitalonline.net/network

**请求方法:** POST

**请求参数:**

|   名称    |  类型  | 是否必选 | 示例                                                         | 描述       |
| :-------: | :----: | :------: | :----------------------------------------------------------- | :--------- |
|   GpnId   | String |    是    | c20a8424-26be-11ea-8333-0242ac110002                         | Gpn编号    |
| DelPoints | Array  |    是    | ["c20a8424-26be-11ea-8333-0242ac110002", <br>"c20a8424-26be-11ea-8333-0242ac110002"<br>] | 删除接入点 |


**返回参数:**

| 名称    | 类型   | 示例    | 描述     |
| :------ | :----- | :------ | :------- |
| Code    | String | Success | 返回码   |
| Message | String | Success | 返回信息 |
| Data    | Dict   | {}      | 返回数据 |
| TaskId  | String | 111     | 任务编号 |

**错误码：**

| httpcode | 错误码                 | 错误信息                                      | 描述                  |
| -------- | ---------------------- | --------------------------------------------- | --------------------- |
| 400      | InvalidGpnID.Malformed | The specified parameter "GpnId" is not valid. | 指定GpnId参数格式错误 |


**返回示例**

```json
{
    "Code": "Success",
    "Data": {},
    "Message": "Success.",
    "TaskId": 3247486
}
```

### 16.DescribeAccessInfo

**Action:** DescribeAccessInfo

**描述:** 查询GPN接入点信息

**请求地址:** cdsapi.capitalonline.net/network

**请求方法:** POST

**请求参数:**

| 名称 |  类型  | 是否必选 | 示例 |        描述         |
| :--: | :----: | :------: | :--: | :-----------------: |
| Type | String |    是    | vdc  | 接入点类型(vdc/pop) |

**返回参数:**

|      名称      |  类型  | 示例                                                         |                  描述                  |
| :------------: | :----: | :----------------------------------------------------------- | :------------------------------------: |
|      Code      | String | Success                                                      |                 返回码                 |
|    Message     | String | Success                                                      |                返回信息                |
|      Data      |  Dict  | {}                                                           |                返回数据                |
| PrivateNetwork |  list  | [{"PrivateId": "928ce33c-22f3-11ea-a1a1-0242ac11001a",<br>"Address": "10.241.7.0"}] | PrivateId: 私网id<br>Address: 网段地址 |
|     CityId     | String | ea3ca775-306c-11e7-9796-0050569b4d9c                         |                城市编号                |
|    RegionId    | String | CN_Beijing_A                                                 |                地区编号                |
|   RegionName   | String | 北京1                                                        |                地区名称                |
|     VdcId      | String | 179d1487-38dd-4656-9553-e1527bf183b2                         |             虚拟数据中心id             |
|    VdcName     | String | vdc1                                                         |            虚拟数据中心名称            |
|    ZoneName    | String | 中国大陆                                                     |                大区名称                |


**返回示例**

```json
{
    "Code": "Success",
    "Data": {
        "Pop": null,
        "Vdc": [
            {
                "CityId": "ea3ca775-306c-11e7-9796-0050569b4d9c",
                "PrivateNetwork": [
                    {
                        "Address": "10.241.60.0",
                        "PrivateId": "3b227ec6-1d77-11ea-bd0d-0242ac110002"
                    }
                ],
                "RegionId": "CN_Beijing_A",
                "RegionName": "北京1",
                "VdcId": "179d1487-38dd-4656-9553-e1527bf183b2",
                "VdcName": "CDS-API-BJ",
                "ZoneName": "中国大陆"
            },
            {
                "CityId": "713d3745-306d-11e7-9796-0050569b4d9c",
                "PrivateNetwork": [
                    {
                        "Address": "10.241.65.0",
                        "PrivateId": "1f4932a8-369a-11ea-8778-0242ac110002"
                    }
                ],
                "RegionId": "CN_Taipei_A",
                "RegionName": "台北1",
                "VdcId": "206305c4-6b1e-4eef-a582-352216b3b48c",
                "VdcName": "CDS-API-TB",
                "ZoneName": "亚太地区"
            }
        ]
    },
    "Message": "Success.",
    "TaskId": ""
}
```

### 17.CreateGpn

   **Action:** CreateGPN

   **描述:** 创建GPN

   **请求地址:** cdsapi.capitalonline.net/network

   **请求方法:** POST

   **请求参数:**

|      名称      |  类型  | 是否必选 | 示例                                                         | 描述                                                         |
| :------------: | :----: | :------: | :----------------------------------------------------------- | :----------------------------------------------------------- |
|      Name      | String |    是    | gpn                                                          | 接入点名称                                                   |
|      Qos       |  Int   |    是    | 5                                                            | GPN带宽                                                      |
|  AccessPoint   |  list  |    是    | [{"VdcId":"",<br/>"AccessPointType":"vdc",<br/>"PrivateId":""}] | Vdc_id: 虚拟数据中心id<br/>AccessPointType:接入点类型<br/>PrivateId:私网id |
| PopAccessPoint |  list  |    是    | [{"AccessPointType":"pop",<br/>"PopId":""}]                  | AccessPointType:接入点类型<br/>PopId:pop点id                 |
| SubjectId      | int | 否       | 123                                                  | 测试金Id                       |

   **返回参数:**

|  名称   |  类型  | 示例    |   描述   |
| :-----: | :----: | :------ | :------: |
|  Code   | String | Success |  返回码  |
| Message | String | Success | 返回信息 |
|  Data   |  Dict  | {}      | 返回数据 |
| TaskId  | String | 111     | 任务编号 |

   **错误码：**

| httpcode | 错误码 | 错误信息  | 描述 |
| ---- | ---- | ---- | ---- |


   **返回示例**

```json
{
    "Code": "Success",
    "Data": {},
    "Message": "Success.",
    "TaskId": 3247486
}
```

**调用代码示例:**

```python
def CreateGPN(Qos, Name, PrivateId1, PrivateId2, VdcId1,VdcId2):
    """
    创建云互联组
    :params Qos: 云互联组带宽
    :params Name: 云互联组名称
    :params PrivateId1: 接入点1的私网编号
    :params PrivateId2: 接入点2的私网编号 
    :params VdcId1: 接入点1的虚拟数据中心编号
    :params VdcId2: 接入点2的虚拟数据中心编号
    """
    action = "CreateGPN"
    method = "POST"
    url = get_signature(action, AK, AccessKeySecret, method, CCS_URL, param={})
    body = {
        "Name": Name,
        "Qos": Qos,
        "AccessPoint": [
            {
                "VdcId": VdcId1,
                "AccessPointType": "vdc",
                "PrivateId": PrivateId1
            },
            {
                "VdcId": VdcId2,
                "AccessPointType": "vdc",
                "PrivateId": PrivateId2
            }
        ],
        "PopAccessPoint": []
    }
    res = requests.post(url, json=body)
    result = json.loads(res.content)
    if result.get("Code") != "Success":
        print("create GPN error: %s" % result.get("Message"))
    return result.get("TaskId")
```

### 18.DeleteGpn

   **Action:** DeleteGpn

   **描述:** 删除一个GPN

   **请求地址:** cdsapi.capitalonline.net/gpn

   **请求方法:** POST

   **请求参数:**

| 名称  |  类型  | 是否必选 |         示例          | 描述    |
| :---: | :----: | :------: | :-------------------: | :------ |
| GpnId | String |    是    | fjdgh90-98fhd78-kh487 | GPN编号 |

   **返回参数:**

|  名称   |  类型  | 示例    |   描述   |
| :-----: | :----: | :------ | :------: |
|  Code   | String | Success |  返回码  |
| Message | String | Success | 返回信息 |
|  Data   |  Dict  | {}      | 返回数据 |
| TaskId  | String | 111     | 任务编号 |

   **错误码：**

| httpcode | 错误码 | 错误信息  | 描述 |
| ---- | ---- | ---- | ---- |


   **返回示例**

```json
{
    "Code": "Success",
    "Data": {},
    "Message": "Success.",
    "TaskId": 3247486
}
```

### 19.ModifyVdceName

**Action：ModifyVdcName**

**描述：** 修改VDC名称

**请求地址:** cdsapi.capitalonline.net/network

**请求方法：POST**

**请求参数：**

| 名称    | 类型   | 是否必选 | 示例值                               | 描述               |
| ------- | ------ | -------- | ------------------------------------ | ------------------ |
| VdcId   | string | 是       | f9053ea8-fc23-4032-8a7f-01def77b4cc0 | 虚拟数据中心的编号 |
| VdcName | string | 是       | shouduzaixhost                       | 虚拟数据中心的名称 |

**返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code   | Interger | Success                              | 错误码 |
| TaskId | string   | bbf63749-0186-4c68-8adc-9bf584bc1376 | 任务Id |

**错误码：**

| httpcode | 错误码                 | 错误信息                                                     | 描述                           |
| -------- | ---------------------- | ------------------------------------------------------------ | ------------------------------ |
| 403      | IncorrectVdcStatus     | The   current Status of the resource does not support this operation. | 该资源目前的状态不支持此操作。 |
| 400      | VdcNotFound            | the Vdc has   deleted                                        | 指定的Vdc已被删除              |
| 400      | InvalidVdcId.Malformed | The specified parameter   "VdcId" is not valid.              | 指定VdcId参数格式错误          |

**返回示例：**

```json
{
  "Code": "Success",
  "Data": {},
  "Message": "Success.",
  "TaskId": ""
}
```

### 20.DescribePipeUtilization

**Action：DescribePipeUtilization**

**描述：** 查询所有pipe资源带宽使用率(未加入GPN的私网不进行统计)

**请求地址:** cdsapi.capitalonline.net/vpc

**请求方法：POST**

**请求参数：**

| 名称 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | -------- | ------ | ---- |
| 无   |      |          |        |      |

**返回参数：**

| 名称   | 类型     | 示例值                               | 描述   |
| :----- | -------- | :----------------------------------- | :----- |
| Code          | string | Success                              | 错误码            |
| Message       | string | success                              | 信息              |
| Data          | dict   | {}                                   | 返回数据          |
| Time          | string | 2023-06-19 11:43:51                  | 时间              |
| VdcInfo       | list   | []                                   | vdc信息列表       |
| VdcId         | string | 019c4121-58d3-453b-9fce-46a05301699e | VDC ID            |
| VdcName       | string | 测试1                                | VDC 名称          |
| PipeInfo      | list   | []                                   | VDC下Pipe信息列表 |
| InFlow        | float | 0                                    | 入向带宽          |
| InUtilization | string | 0.0%                                 | 入向带宽使用率         |
| OutFlow | float | 0 | 出向带宽 |
| OutUtilization | string | 0.0% | 出向带宽使用率 |
| PipeId | string | 61c5c88a-0712-11ed-bddb-a6f78540e6aa | Pipe ID |
| PipeName | string | 公网1 | Pipe名称 |
| Qos | int | 10 | Pipe带宽限速 |
| Type | string | public | Pipe类型:public/private（公网/私网） |

**错误码：**

| httpcode | 错误码                 | 错误信息                                                     | 描述                           |
| -------- | ---------------------- | ------------------------------------------------------------ | ------------------------------ |

**返回示例：**
```json
{
    "Code": "Success",
    "Data": {
        "Time": "2023-06-19 11:43:51",
        "VdcInfo": [
            {
                "PipeInfo": null,
                "VdcId": "019c4121-58d3-453b-9fce-46a05301699e",
                "VdcName": "测试1"
            },
            {
                "PipeInfo": [
                    {
                        "InFlow": 0,
                        "InUtilization": "0.0%",
                        "OutFlow": 0,
                        "OutUtilization": "0.0%",
                        "PipeId": "61c5c88a-0712-11ed-bddb-a6f78540e6aa",
                        "PipeName": "公网1",
                        "Qos": 10,
                        "Type": "public"
                    }
                ],
                "VdcId": "02a6eadb-8e81-47ec-a891-2ec7a805afcb",
                "VdcName": "测试2"
            }
        ]
    },
    "Message": "success"
}
```

